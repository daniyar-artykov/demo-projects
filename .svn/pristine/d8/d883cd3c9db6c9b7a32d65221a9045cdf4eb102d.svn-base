/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * JImagePanelEx.java
 *
 * Created on Sep 27, 2011, 10:17:22 AM
 */

package sleekbill.swingutils;

import java.awt.AlphaComposite;
import java.awt.Color;
import java.awt.Composite;
import java.awt.GradientPaint;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Paint;
import java.awt.geom.RoundRectangle2D;


/**
 *
 * @author dani
 */
public class JImagePanelEx extends javax.swing.JPanel {

	private Image image;
	private Image imageSelection;
	private boolean selected = false;
//	private Color startGradient = new Color(199, 254, 216);
//	private Color endGradient = new Color(5, 209, 67);
	private Color startGradient = new Color(246, 250, 247);
	private Color endGradient = new Color(225, 242, 204);
	private float alpha = 0.6f;

	public JImagePanelEx() {
		this(null, null);
	}

	public JImagePanelEx(Image image, Image imageSelection) {
		this.image = image;
		this.imageSelection = imageSelection;
		initComponents();
	}

	@Override
	protected void paintComponent(Graphics g) {
		super.paintComponent(g);
		int width = getWidth();
		int height = getHeight();
		if(image != null){
			g.drawImage(image, 0, 0, width, height, null);
		}
		if(selected && imageSelection != null) {

			Graphics2D g2 = (Graphics2D) g;
			Paint oldPaint = g2.getPaint();
			Composite oldComposite = g2.getComposite();

			GradientPaint paint = new GradientPaint(0, 0, startGradient, 0, getHeight(), endGradient);
			AlphaComposite newComposite = AlphaComposite.getInstance(AlphaComposite.SRC_OVER, alpha);
			g2.setComposite(newComposite);
			g2.setPaint(paint);
			g2.fill(new RoundRectangle2D.Double(0, 0, getWidth(), getHeight(), 0, 0));
			g2.setPaint(oldPaint);
			g2.setComposite(oldComposite);
			
			g.drawImage(imageSelection, width/2 - imageSelection.getWidth(null)/2,
					height/2 - imageSelection.getHeight(null)/2, null);
		}
	}

	public void setSelected(boolean selected) {
		this.selected = selected;
	}

	public boolean isSelected() {
		return selected;
	}
	
    public Image getImage() {
		return image;
	}

	public void setImage(Image image) {
		this.image = image;
	}

	public Image getImageSelection() {
		return imageSelection;
	}

	public void setImageSelection(Image imageSelection) {
		this.imageSelection = imageSelection;
	}

	public void setGradientColors(Color start, Color end, float alpha) {
		this.startGradient = start;
		this.endGradient = end;
		this.alpha = alpha;
	}

	/** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 400, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 300, Short.MAX_VALUE)
        );
    }// </editor-fold>//GEN-END:initComponents


    // Variables declaration - do not modify//GEN-BEGIN:variables
    // End of variables declaration//GEN-END:variables

}
